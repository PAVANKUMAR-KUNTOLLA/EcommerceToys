{"version":3,"sources":["webpack:///./src/views/Products/ProductView.js"],"names":["productViewCustomStyles","makeStyles","theme","mainBlock","_defineProperty","display","justifyContent","alignItems","flexDirection","breakpoints","up","leftBlock","width","marginLeft","marginTop","marginRight","down","largeImage","position","mainImage","height","refImages","overflowX","scrollbarWidth","msOverflowStyle","scrollbarColor","smallImage","cursor","rightBlock","marginBottom","title","fontSize","fontWeight","lineHeight","price","buttonContainer","button","description","paragraph","relevantProducts","maxWidth","relatedProductsTitle","textTransform","color","letterSpacing","ProductViewPage","params","useParams","products","useSelector","state","dispatch","useDispatch","currProduct","find","product","id","parseInt","currProductRef","useRef","filter","startsWith","category","_useState2","_slicedToArray","useState","currentSlide","setCurrentSlide","_useState4","isFavLoadingSpin","setIsFavLoadingSpin","_useState6","isCartLoadingSpin","setIsCartLoadingSpin","customStyles","handleRecordVisitHistory","payload","privateApiPOST","Api","record_visit","then","response","status","data","console","log","message","error","handleEditProduct","edit_product","setProducts","useEffect","current","setSearch","React","createElement","Page","length","Box","sx","className","Avatar","variant","src","concat","alt","Array","from","keys","map","index","key","component","activeImage","onClick","handleSlide","Typography","thousands_separators","Button","is_favourite","CircularProgress","size","is_item_in_cart","quantity","split","line","trim","Fragment","ProductSlider"],"mappings":"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","file":"ProductView.js","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport Page from \"../../components/Page\";\r\nimport axios from \"axios\";\r\nimport { useLocation, useParams } from \"react-router-dom\";\r\nimport {\r\n  Container,\r\n  Box,\r\n  Typography,\r\n  Button,\r\n  Avatar,\r\n  CircularProgress,\r\n  Grid,\r\n} from \"@mui/material\";\r\nimport { makeStyles } from \"@mui/styles\";\r\n\r\nimport { privateApiGET, privateApiPOST } from \"../../components/PrivateRoute\";\r\nimport Api from \"../../components/Api\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { setProducts, setSearch } from \"../../redux/products/produtsSlice\";\r\nimport ProductSlider from \"../../components/slider\";\r\nimport { thousands_separators } from \"../../utils\";\r\n\r\nconst productViewCustomStyles = makeStyles((theme) => ({\r\n  mainBlock: {\r\n    display: \"flex\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    flexDirection: \"column\",\r\n    [theme.breakpoints.up(\"md\")]: {\r\n      flexDirection: \"row\",\r\n    },\r\n  },\r\n  leftBlock: {\r\n    width: \"40vw\",\r\n    marginLeft: \"5vw\",\r\n    marginTop: \"1rem\",\r\n    marginRight: \"5vw\",\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      width: \"80vw\",\r\n      marginLeft: \"10vw\",\r\n      marginRight: \"10vw\",\r\n    },\r\n  },\r\n  largeImage: {\r\n    position: \"relative\",\r\n  },\r\n  mainImage: {\r\n    position: \"relative\",\r\n    width: \"100%\",\r\n    height: \"auto\",\r\n  },\r\n\r\n  refImages: {\r\n    marginTop: \"1rem\",\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n    overflowX: \"scroll\",\r\n    scrollbarWidth: \"none\",\r\n    msOverflowStyle: \"none\",\r\n    scrollbarColor: \"transparent\",\r\n    \"&::-webkit-scrollbar\": {\r\n      width: \"0px\", // Hide the scrollbar for Chrome, Safari, and newer Edge\r\n    },\r\n  },\r\n  smallImage: {\r\n    width: \"100px\",\r\n    marginRight: \"10px\",\r\n    cursor: \"pointer\",\r\n  },\r\n  rightBlock: {\r\n    width: \"40vw\",\r\n    marginRight: \"10vw\",\r\n    marginTop: \"5rem\",\r\n    marginBottom: \"auto\",\r\n    [theme.breakpoints.down(\"md\")]: {\r\n      width: \"80vw\",\r\n      marginLeft: \"10vw\",\r\n      marginRight: \"10vw\",\r\n      marginTop: \"1rem\",\r\n    },\r\n  },\r\n\r\n  title: {\r\n    fontSize: \"24px\",\r\n    fontWeight: \"540\",\r\n    lineHeight: \"27px\",\r\n    marginBottom: \"16px\",\r\n  },\r\n  price: {\r\n    fontWeight: \"700\",\r\n    fontSize: \"21px\",\r\n    lineHeight: \"24px\",\r\n    marginBottom: \"24px\",\r\n  },\r\n\r\n  buttonContainer: {\r\n    justifyContent: \"center\",\r\n    marginTop: \"1rem\",\r\n  },\r\n\r\n  button: {\r\n    marginRight: \"1rem\",\r\n  },\r\n\r\n  description: {\r\n    fontSize: \"21px\",\r\n    fontWeight: \"600\",\r\n    lineHeight: \"24px\",\r\n    marginTop: \"36px\",\r\n    marginBottom: \"-24px\",\r\n  },\r\n  paragraph: {\r\n    fontSize: \"16px\",\r\n    fontWeight: \"400\",\r\n    lineHeight: \"19px\",\r\n  },\r\n  relevantProducts: {\r\n    maxWidth: \"80vw\",\r\n    justifyContent: \"space-between\",\r\n    alignItems: \"center\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n    // [theme.breakpoints.down(\"sm\")]: {\r\n    //   maxWidth: \"80vw\",\r\n    // },\r\n  },\r\n  relatedProductsTitle: {\r\n    textTransform: \"uppercase\",\r\n    color: \"#3e4152\",\r\n    fontSize: \"28px\",\r\n    fontWeight: \"700\",\r\n    marginTop: \"34px\",\r\n    marginBottom: \"10px\",\r\n    letterSpacing: \"1.5px\",\r\n    [theme.breakpoints.down(\"sm\")]: {\r\n      marginTop: \"0\",\r\n      fontSize: \"20px\",\r\n      letterSpacing: \"0.5px\",\r\n      marginBottom: \"0px\",\r\n    },\r\n  },\r\n}));\r\n\r\nconst ProductViewPage = () => {\r\n  const params = useParams();\r\n  const products = useSelector((state) => state.products.products);\r\n  const dispatch = useDispatch();\r\n  const currProduct = products.find(\r\n    (product) => product.id === parseInt(params.id)\r\n  );\r\n  let currProductRef = useRef(params.id);\r\n  const relevantProducts = currProduct\r\n    ? products.filter(\r\n        (product) =>\r\n          (product.title.startsWith(currProduct[\"title\"]) ||\r\n            product.category === currProduct[\"category\"]) &&\r\n          product.id != params.id\r\n      )\r\n    : [];\r\n  const [currentSlide, setCurrentSlide] = useState(0);\r\n  const [isFavLoadingSpin, setIsFavLoadingSpin] = useState(false);\r\n  const [isCartLoadingSpin, setIsCartLoadingSpin] = useState(false);\r\n  const customStyles = productViewCustomStyles();\r\n\r\n  const handleSlide = (index) => {\r\n    setCurrentSlide(index);\r\n  };\r\n\r\n  const handleRecordVisitHistory = () => {\r\n    let payload = { id: params.id };\r\n    privateApiPOST(Api.record_visit, payload)\r\n      .then((response) => {\r\n        const { status, data } = response;\r\n        console.log(\"data\", data?.message);\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error\", error);\r\n      });\r\n  };\r\n\r\n  const handleEditProduct = (data) => {\r\n    let payload = data;\r\n    privateApiPOST(Api.edit_product, payload)\r\n      .then((response) => {\r\n        const { status, data } = response;\r\n        if (status === 200) {\r\n          console.log(\"data\", data);\r\n          dispatch(setProducts(data?.data));\r\n          setIsFavLoadingSpin(false);\r\n          setIsCartLoadingSpin(false);\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"Error\", error);\r\n        setIsFavLoadingSpin(false);\r\n        setIsCartLoadingSpin(false);\r\n      });\r\n  };\r\n\r\n  const handleFavouriteClick = () => {\r\n    const data = {\r\n      id: currProduct.id,\r\n      title: currProduct.title,\r\n      is_favourite: !currProduct.is_favourite,\r\n    };\r\n    setIsFavLoadingSpin(true);\r\n    handleEditProduct(data);\r\n  };\r\n\r\n  const handleAddToCartClick = () => {\r\n    const data = {\r\n      id: currProduct.id,\r\n      title: currProduct.title,\r\n      is_item_in_cart: !currProduct.is_item_in_cart,\r\n      quantity: currProduct.quantity + 1,\r\n    };\r\n    setIsCartLoadingSpin(true);\r\n    handleEditProduct(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (params.id !== currProductRef.current) {\r\n      handleRecordVisitHistory();\r\n      setCurrentSlide(0);\r\n    }\r\n  }, [currProduct]);\r\n\r\n  useEffect(() => {\r\n    dispatch(setSearch(false));\r\n    handleRecordVisitHistory();\r\n  }, []);\r\n\r\n  return (\r\n    <Page title=\"products\">\r\n      {products.length > 0 && currProduct ? (\r\n        <Box sx={{ marginTop: \"10px\" }}>\r\n          <Box className={customStyles.mainBlock}>\r\n            <Box className={customStyles.leftBlock}>\r\n              <Box className={customStyles.largeImage}>\r\n                <Box sx={{ position: \"relative\" }}>\r\n                  <Avatar\r\n                    className={customStyles.mainImage}\r\n                    variant=\"square\"\r\n                    src={`https://${currProduct[`image_${currentSlide}`]}`}\r\n                    alt={`Slide ${currentSlide + 1}`}\r\n                  />\r\n                </Box>\r\n              </Box>\r\n              <Box className={customStyles.refImages}>\r\n                {Array.from(Array(15).keys()).map((index) => (\r\n                  <Box\r\n                    key={index}\r\n                    component=\"img\"\r\n                    className={`${customStyles.smallImage} ${\r\n                      index === currentSlide ? customStyles.activeImage : \"\"\r\n                    }`}\r\n                    src={`https://${currProduct[`image_${index}`]}`}\r\n                    alt={`Reference ${index + 1}`}\r\n                    onClick={() => handleSlide(index)}\r\n                  />\r\n                ))}\r\n              </Box>\r\n            </Box>\r\n            <Box className={customStyles.rightBlock}>\r\n              <Typography className={customStyles.title}>\r\n                {currProduct.title}\r\n              </Typography>\r\n              {currProduct && currProduct[\"price\"] && (\r\n                <Typography className={customStyles.price}>\r\n                  Rs. {thousands_separators(currProduct.price)}\r\n                </Typography>\r\n              )}\r\n              <Box className={customStyles.buttonContainer}>\r\n                <Button\r\n                  variant={currProduct.is_favourite ? \"contained\" : \"outlined\"}\r\n                  onClick={handleFavouriteClick}\r\n                  className={customStyles.button}\r\n                >\r\n                  ADD TO FAV{\" \"}\r\n                  {isFavLoadingSpin && (\r\n                    <CircularProgress\r\n                      size={15}\r\n                      color={currProduct.is_favourite ? \"secondary\" : \"primary\"}\r\n                      sx={{ marginLeft: \"15px\" }}\r\n                    />\r\n                  )}\r\n                </Button>\r\n                <Button\r\n                  variant={\r\n                    currProduct.is_item_in_cart ? \"contained\" : \"outlined\"\r\n                  }\r\n                  onClick={handleAddToCartClick}\r\n                  className={customStyles.button}\r\n                >\r\n                  ADD TO CART{\" \"}\r\n                  {isCartLoadingSpin && (\r\n                    <CircularProgress\r\n                      size={15}\r\n                      color={\r\n                        currProduct.is_item_in_cart ? \"secondary\" : \"primary\"\r\n                      }\r\n                      sx={{ marginLeft: \"15px\" }}\r\n                    />\r\n                  )}\r\n                </Button>\r\n              </Box>\r\n              <Typography className={customStyles.description}>\r\n                Description:\r\n              </Typography>\r\n              {currProduct && currProduct[\"description\"] && (\r\n                <Box className={customStyles.description}>\r\n                  {currProduct[\"description\"].split(\"\\n\").map(\r\n                    (line, index) =>\r\n                      line.trim() !== \"\" && (\r\n                        <React.Fragment key={index}>\r\n                          <Typography className={customStyles.paragraph}>\r\n                            {line}\r\n                          </Typography>\r\n                          <Typography>\r\n                            <br></br>\r\n                          </Typography>\r\n                        </React.Fragment>\r\n                      )\r\n                  )}\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          </Box>\r\n          {relevantProducts.length > 0 && (\r\n            <Box\r\n              sx={{ marginTop: \"36px\", marginBottom: \"48px\" }}\r\n              className={customStyles.relevantProducts}\r\n            >\r\n              <Typography className={customStyles.relatedProductsTitle}>\r\n                Related products\r\n              </Typography>\r\n              <ProductSlider products={relevantProducts} />\r\n            </Box>\r\n          )}\r\n        </Box>\r\n      ) : null}\r\n    </Page>\r\n  );\r\n};\r\n\r\nexport default ProductViewPage;\r\n"],"sourceRoot":""}